<Page x:Class="EMC.USub04"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:EMC"
      xmlns:uc="clr-namespace:EMC"
      mc:Ignorable="d" 
      Title="USub04">
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/01 SYSTEM/Common/Styles/DefaultResource.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>
    
    <!-- 에러 로그 화면 -->
    <Border Style="{StaticResource Panel.Radius5}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.85*"></ColumnDefinition>
                <ColumnDefinition Width="0.15*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>

            <Border Grid.Column="0" Grid.Row="0" Margin="10">
                <uc:TitleBar Title="에러 로그"/>
            </Border>

            <DataGrid Grid.Column="0" Grid.Row="1" 
                      ItemsSource="{Binding ErrorList}"
                      SelectedItem="{Binding SelectedError, Mode=TwoWay}"
                      Style="{StaticResource DataGrid.Transparent}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="True"     
                      IsReadOnly="True"
                      HeadersVisibility="Column"
                      RowHeaderWidth="0"
                      VirtualizingPanel.IsVirtualizing="True"
                      VirtualizingPanel.VirtualizationMode="Recycling"
                      EnableRowVirtualization="True"
                      ScrollViewer.CanContentScroll="True"
                      Margin="10">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="순번" Binding="{Binding Id}" Width="1*" IsReadOnly="True"/>
                    <DataGridTextColumn Header="에러 번호" Binding="{Binding ErrorContents}" Width="1*"/>
                    <DataGridTextColumn Header="에러 내용" Binding="{Binding ErrorContents}" Width="4*"/>
                    <DataGridTextColumn Header="발생 날짜" Binding="{Binding ErrorContents}" Width="1*"/>
                    <DataGridTextColumn Header="발생 시각" Binding="{Binding ErrorContents}" Width="1*"/>
                    <DataGridTextColumn Header="해제 시각" Binding="{Binding ErrorContents}" Width="1*"/>
                    <DataGridTextColumn Header="조치 시간" Binding="{Binding ErrorContents}" Width="1*"/>
                </DataGrid.Columns>
            </DataGrid>

            <!-- 오른쪽 검색 패널 -->
            <Grid Grid.Column="1" Grid.Row="1" Margin="8">
                <GroupBox Header="검색" Padding="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Begin" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <DatePicker Grid.Row="0" Grid.Column="1"
                    SelectedDate="{Binding BeginDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    Margin="0,2"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="End" VerticalAlignment="Center" Margin="0,8,8,0"/>
                        <DatePicker Grid.Row="1" Grid.Column="1"
                    SelectedDate="{Binding EndDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    Margin="0,8,0,2"/>

                        <Button Grid.Row="2" Grid.ColumnSpan="2"
                    Content="검색"
                    Margin="0,12,0,0"
                    HorizontalAlignment="Stretch"
                    Command="{Binding SearchErrorsCommand}"/>

                        <Button Grid.Row="3" Grid.ColumnSpan="2"
                    Content="SAVE AS *.XLS FILE"
                    Margin="0,12,0,0"
                    HorizontalAlignment="Stretch"
                    Command="{Binding SaveExcelCommand}"/>
                    </Grid>
                </GroupBox>
            </Grid>

        </Grid>
    </Border>
    
</Page>
